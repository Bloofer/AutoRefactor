public Hashtable parse2(String s)
    {
        String valArray[] = null;
        if (s == null) throw new IllegalArgumentException();

        Hashtable ht = new Hashtable();
        StringBuffer sb = new StringBuffer();
        String key;

        for (StringTokenizer st = new StringTokenizer(s, "&"); st.hasMoreTokens(); ht.put(key, valArray))
        {
            String pair = st.nextToken();
            int pos = pair.indexOf(61);
            if (pos == -1) throw new IllegalArgumentException();

            key = pair.substring(0, pos);
            String val = parseName2(pair.substring(pos + 1, pair.length()), sb);

            if (ht.containsKey(key))
            {
                String oldVals[] = (String[]) ht.get(key);
                valArray = new String[oldVals.length + 1];
                for (int i = 0; i < oldVals.length; i++)
                    valArray[i] = oldVals[i];

                valArray[oldVals.length] = val;
            }
            else
            {
                valArray = new String[1];
                valArray[0] = val;
            }
        }

        return ht;
    }

